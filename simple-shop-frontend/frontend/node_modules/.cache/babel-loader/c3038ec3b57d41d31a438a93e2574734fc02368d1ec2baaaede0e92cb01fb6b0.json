{"ast":null,"code":"export default {\n  name: 'ImageCarousel',\n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    images: {\n      type: Array,\n      default: () => []\n    },\n    initialIndex: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      currentIndex: 0,\n      defaultImage: 'https://img.pngsucai.com/00/87/02/31a2f72e4e901438.webp'\n    };\n  },\n  computed: {\n    currentImage() {\n      if (this.images.length === 0) return this.defaultImage;\n      return this.images[this.currentIndex] || this.defaultImage;\n    }\n  },\n  watch: {\n    show(newVal) {\n      if (newVal) {\n        this.currentIndex = Math.min(this.initialIndex, this.images.length - 1);\n        this.addKeydownListener();\n      } else {\n        this.removeKeydownListener();\n      }\n    }\n  },\n  beforeUnmount() {\n    this.removeKeydownListener();\n  },\n  methods: {\n    nextImage() {\n      if (this.currentIndex < this.images.length - 1) {\n        this.currentIndex++;\n      }\n    },\n    prevImage() {\n      if (this.currentIndex > 0) {\n        this.currentIndex--;\n      }\n    },\n    goToImage(index) {\n      if (index >= 0 && index < this.images.length) {\n        this.currentIndex = index;\n      }\n    },\n    close() {\n      this.$emit('close');\n    },\n    handleImageError(e) {\n      e.target.src = this.defaultImage;\n    },\n    addKeydownListener() {\n      document.addEventListener('keydown', this.handleKeydown);\n    },\n    removeKeydownListener() {\n      document.removeEventListener('keydown', this.handleKeydown);\n    },\n    handleKeydown(e) {\n      switch (e.key) {\n        case 'ArrowRight':\n          this.nextImage();\n          break;\n        case 'ArrowLeft':\n          this.prevImage();\n          break;\n        case 'Escape':\n          this.close();\n          break;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","show","type","Boolean","default","images","Array","initialIndex","Number","data","currentIndex","defaultImage","computed","currentImage","length","watch","newVal","Math","min","addKeydownListener","removeKeydownListener","beforeUnmount","methods","nextImage","prevImage","goToImage","index","close","$emit","handleImageError","e","target","src","document","addEventListener","handleKeydown","removeEventListener","key"],"sources":["E:\\Software-Engineering2.0\\Software-Engineering-9bea62c8ef6d7754a2d932a0227f9bc4fff09a3c\\litemall\\simple-shop-frontend\\frontend\\src\\components\\ImageCarousel.vue"],"sourcesContent":["<template>\n  <div v-if=\"show\" class=\"image-carousel-overlay\" @click.self=\"close\">\n    <div class=\"image-carousel-container\">\n      <button class=\"close-btn\" @click=\"close\">&times;</button>\n      \n      <button class=\"nav-btn prev-btn\" @click=\"prevImage\" :disabled=\"currentIndex === 0\">\n        &lt;\n      </button>\n      \n      <div class=\"carousel-image-wrapper\">\n        <img \n          :src=\"currentImage\" \n          :alt=\"`图片 ${currentIndex + 1}/${images.length}`\"\n          class=\"carousel-image\"\n          @error=\"handleImageError\"\n        >\n      </div>\n      \n      <button class=\"nav-btn next-btn\" @click=\"nextImage\" :disabled=\"currentIndex === images.length - 1\">\n        &gt;\n      </button>\n      \n      <div class=\"carousel-indicators\">\n        <span \n          v-for=\"(img, index) in images\" \n          :key=\"index\"\n          class=\"indicator\"\n          :class=\"{ active: index === currentIndex }\"\n          @click=\"goToImage(index)\"\n        ></span>\n      </div>\n      \n      <div class=\"carousel-counter\">\n        {{ currentIndex + 1 }} / {{ images.length }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ImageCarousel',\n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    images: {\n      type: Array,\n      default: () => []\n    },\n    initialIndex: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      currentIndex: 0,\n      defaultImage: 'https://img.pngsucai.com/00/87/02/31a2f72e4e901438.webp'\n    }\n  },\n  computed: {\n    currentImage() {\n      if (this.images.length === 0) return this.defaultImage;\n      return this.images[this.currentIndex] || this.defaultImage;\n    }\n  },\n  watch: {\n    show(newVal) {\n      if (newVal) {\n        this.currentIndex = Math.min(this.initialIndex, this.images.length - 1);\n        this.addKeydownListener();\n      } else {\n        this.removeKeydownListener();\n      }\n    }\n  },\n  beforeUnmount() {\n    this.removeKeydownListener();\n  },\n  methods: {\n    nextImage() {\n      if (this.currentIndex < this.images.length - 1) {\n        this.currentIndex++;\n      }\n    },\n    prevImage() {\n      if (this.currentIndex > 0) {\n        this.currentIndex--;\n      }\n    },\n    goToImage(index) {\n      if (index >= 0 && index < this.images.length) {\n        this.currentIndex = index;\n      }\n    },\n    close() {\n      this.$emit('close');\n    },\n    handleImageError(e) {\n      e.target.src = this.defaultImage;\n    },\n    addKeydownListener() {\n      document.addEventListener('keydown', this.handleKeydown);\n    },\n    removeKeydownListener() {\n      document.removeEventListener('keydown', this.handleKeydown);\n    },\n    handleKeydown(e) {\n      switch(e.key) {\n        case 'ArrowRight':\n          this.nextImage();\n          break;\n        case 'ArrowLeft':\n          this.prevImage();\n          break;\n        case 'Escape':\n          this.close();\n          break;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image-carousel-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.image-carousel-container {\n  position: relative;\n  width: 90%;\n  height: 80%;\n  max-width: 1200px;\n}\n\n.close-btn {\n  position: absolute;\n  top: -40px;\n  right: 0;\n  background: none;\n  border: none;\n  color: white;\n  font-size: 2.5rem;\n  cursor: pointer;\n  z-index: 10;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.3s;\n}\n\n.close-btn:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.nav-btn {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  border: none;\n  font-size: 2rem;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.3s;\n  z-index: 5;\n}\n\n.nav-btn:hover:not(:disabled) {\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.nav-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.prev-btn {\n  left: 20px;\n}\n\n.next-btn {\n  right: 20px;\n}\n\n.carousel-image-wrapper {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n}\n\n.carousel-image {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n}\n\n.carousel-indicators {\n  position: absolute;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 10px;\n}\n\n.indicator {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.indicator.active {\n  background-color: white;\n  width: 20px;\n  border-radius: 6px;\n}\n\n.carousel-counter {\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  padding: 5px 10px;\n  border-radius: 4px;\n  font-size: 0.9rem;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .image-carousel-container {\n    width: 95%;\n    height: 70%;\n  }\n  \n  .nav-btn {\n    font-size: 1.5rem;\n    width: 40px;\n    height: 40px;\n  }\n  \n  .prev-btn {\n    left: 10px;\n  }\n  \n  .next-btn {\n    right: 10px;\n  }\n}\n</style>"],"mappings":"AAwCA,eAAe;EACbA,IAAI,EAAE,eAAe;EACrBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,OAAO;MACbC,OAAO,EAAE;IACX,CAAC;IACDC,MAAM,EAAE;MACNH,IAAI,EAAEI,KAAK;MACXF,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAC;IACDG,YAAY,EAAE;MACZL,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACX;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,YAAYA,CAAA,EAAG;MACb,IAAI,IAAI,CAACR,MAAM,CAACS,MAAK,KAAM,CAAC,EAAE,OAAO,IAAI,CAACH,YAAY;MACtD,OAAO,IAAI,CAACN,MAAM,CAAC,IAAI,CAACK,YAAY,KAAK,IAAI,CAACC,YAAY;IAC5D;EACF,CAAC;EACDI,KAAK,EAAE;IACLd,IAAIA,CAACe,MAAM,EAAE;MACX,IAAIA,MAAM,EAAE;QACV,IAAI,CAACN,YAAW,GAAIO,IAAI,CAACC,GAAG,CAAC,IAAI,CAACX,YAAY,EAAE,IAAI,CAACF,MAAM,CAACS,MAAK,GAAI,CAAC,CAAC;QACvE,IAAI,CAACK,kBAAkB,CAAC,CAAC;MAC3B,OAAO;QACL,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC9B;IACF;EACF,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,CAACD,qBAAqB,CAAC,CAAC;EAC9B,CAAC;EACDE,OAAO,EAAE;IACPC,SAASA,CAAA,EAAG;MACV,IAAI,IAAI,CAACb,YAAW,GAAI,IAAI,CAACL,MAAM,CAACS,MAAK,GAAI,CAAC,EAAE;QAC9C,IAAI,CAACJ,YAAY,EAAE;MACrB;IACF,CAAC;IACDc,SAASA,CAAA,EAAG;MACV,IAAI,IAAI,CAACd,YAAW,GAAI,CAAC,EAAE;QACzB,IAAI,CAACA,YAAY,EAAE;MACrB;IACF,CAAC;IACDe,SAASA,CAACC,KAAK,EAAE;MACf,IAAIA,KAAI,IAAK,KAAKA,KAAI,GAAI,IAAI,CAACrB,MAAM,CAACS,MAAM,EAAE;QAC5C,IAAI,CAACJ,YAAW,GAAIgB,KAAK;MAC3B;IACF,CAAC;IACDC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;IACrB,CAAC;IACDC,gBAAgBA,CAACC,CAAC,EAAE;MAClBA,CAAC,CAACC,MAAM,CAACC,GAAE,GAAI,IAAI,CAACrB,YAAY;IAClC,CAAC;IACDQ,kBAAkBA,CAAA,EAAG;MACnBc,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,aAAa,CAAC;IAC1D,CAAC;IACDf,qBAAqBA,CAAA,EAAG;MACtBa,QAAQ,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,aAAa,CAAC;IAC7D,CAAC;IACDA,aAAaA,CAACL,CAAC,EAAE;MACf,QAAOA,CAAC,CAACO,GAAG;QACV,KAAK,YAAY;UACf,IAAI,CAACd,SAAS,CAAC,CAAC;UAChB;QACF,KAAK,WAAW;UACd,IAAI,CAACC,SAAS,CAAC,CAAC;UAChB;QACF,KAAK,QAAQ;UACX,IAAI,CAACG,KAAK,CAAC,CAAC;UACZ;MACJ;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}