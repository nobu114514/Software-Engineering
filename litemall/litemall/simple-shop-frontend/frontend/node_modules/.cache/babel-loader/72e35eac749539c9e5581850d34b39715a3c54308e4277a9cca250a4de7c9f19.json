{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"change-password\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-danger\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"alert alert-success\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", null, \"修改密码\", -1 /* CACHED */)), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.success ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \" 密码修改成功 \")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.changePassword && $options.changePassword(...args), [\"prevent\"])),\n    class: \"card\"\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"用户名\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"oldPassword\"\n  }, \"旧密码\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"oldPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.oldPassword = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.oldPassword]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"newPassword\"\n  }, \"新密码\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"newPassword\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.newPassword = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newPassword]])]), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"form-actions\"\n  }, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn\"\n  }, \"修改密码\"), _createElementVNode(\"a\", {\n    href: \"/seller/dashboard\",\n    class: \"btn btn-secondary\"\n  }, \"取消\")], -1 /* CACHED */))], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","error","_hoisted_2","_toDisplayString","success","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","changePassword","_hoisted_4","for","type","id","username","$event","required","_hoisted_5","oldPassword","_hoisted_6","newPassword","href"],"sources":["E:\\购物网站\\simple-shop-frontend\\frontend\\src\\views\\ChangePassword.vue"],"sourcesContent":["<template>\n  <div class=\"change-password\">\n    <h1>修改密码</h1>\n    \n    <div v-if=\"error\" class=\"alert alert-danger\">\n      {{ error }}\n    </div>\n    \n    <div v-if=\"success\" class=\"alert alert-success\">\n      密码修改成功\n    </div>\n    \n    <form @submit.prevent=\"changePassword\" class=\"card\">\n      <div class=\"form-group\">\n        <label for=\"username\">用户名</label>\n        <input type=\"text\" id=\"username\" v-model=\"username\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"oldPassword\">旧密码</label>\n        <input type=\"password\" id=\"oldPassword\" v-model=\"oldPassword\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"newPassword\">新密码</label>\n        <input type=\"password\" id=\"newPassword\" v-model=\"newPassword\" required>\n      </div>\n      <div class=\"form-actions\">\n        <button type=\"submit\" class=\"btn\">修改密码</button>\n        <a href=\"/seller/dashboard\" class=\"btn btn-secondary\">取消</a>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ChangePassword',\n  data() {\n    return {\n      username: '',\n      oldPassword: '',\n      newPassword: '',\n      error: '',\n      success: false\n    }\n  },\n  methods: {\n    async changePassword() {\n      try {\n        const response = await this.$axios.post('/seller/change-password', null, {\n          params: {\n            username: this.username,\n            oldPassword: this.oldPassword,\n            newPassword: this.newPassword\n          }\n        })\n        \n        if (response.data) {\n          this.success = true\n          this.error = ''\n          // 重置表单\n          this.username = ''\n          this.oldPassword = ''\n          this.newPassword = ''\n          // 3秒后跳转到后台首页\n          setTimeout(() => {\n            this.$router.push('/seller/dashboard')\n          }, 3000)\n        } else {\n          this.error = '旧密码不正确'\n          this.success = false\n        }\n      } catch (err) {\n        this.error = '修改密码失败，请重试'\n        this.success = false\n        console.error(err)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.form-actions {\n  margin-top: 1.5rem;\n  display: flex;\n  gap: 1rem;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;;EAGRA,KAAK,EAAC;;;;EAIJA,KAAK,EAAC;;;EAKnBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;uBApB3BC,mBAAA,CA6BM,OA7BNC,UA6BM,G,0BA5BJC,mBAAA,CAAa,YAAT,MAAI,qBAEGC,KAAA,CAAAC,KAAK,I,cAAhBJ,mBAAA,CAEM,OAFNK,UAEM,EAAAC,gBAAA,CADDH,KAAA,CAAAC,KAAK,oB,mCAGCD,KAAA,CAAAI,OAAO,I,cAAlBP,mBAAA,CAEM,OAFNQ,UAEM,EAF0C,UAEhD,K,mCAEAN,mBAAA,CAiBO;IAjBAO,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IAAEb,KAAK,EAAC;MAC3CG,mBAAA,CAGM,OAHNa,UAGM,G,0BAFJb,mBAAA,CAAiC;IAA1Bc,GAAG,EAAC;EAAU,GAAC,KAAG,qB,gBACzBd,mBAAA,CAA6D;IAAtDe,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,UAAU;+DAAUf,KAAA,CAAAgB,QAAQ,GAAAC,MAAA;IAAEC,QAAQ,EAAR;iDAAVlB,KAAA,CAAAgB,QAAQ,E,KAEpDjB,mBAAA,CAGM,OAHNoB,UAGM,G,0BAFJpB,mBAAA,CAAoC;IAA7Bc,GAAG,EAAC;EAAa,GAAC,KAAG,qB,gBAC5Bd,mBAAA,CAAuE;IAAhEe,IAAI,EAAC,UAAU;IAACC,EAAE,EAAC,aAAa;+DAAUf,KAAA,CAAAoB,WAAW,GAAAH,MAAA;IAAEC,QAAQ,EAAR;iDAAblB,KAAA,CAAAoB,WAAW,E,KAE9DrB,mBAAA,CAGM,OAHNsB,UAGM,G,0BAFJtB,mBAAA,CAAoC;IAA7Bc,GAAG,EAAC;EAAa,GAAC,KAAG,qB,gBAC5Bd,mBAAA,CAAuE;IAAhEe,IAAI,EAAC,UAAU;IAACC,EAAE,EAAC,aAAa;+DAAUf,KAAA,CAAAsB,WAAW,GAAAL,MAAA;IAAEC,QAAQ,EAAR;iDAAblB,KAAA,CAAAsB,WAAW,E,+BAE9DvB,mBAAA,CAGM;IAHDH,KAAK,EAAC;EAAc,IACvBG,mBAAA,CAA+C;IAAvCe,IAAI,EAAC,QAAQ;IAAClB,KAAK,EAAC;KAAM,MAAI,GACtCG,mBAAA,CAA4D;IAAzDwB,IAAI,EAAC,mBAAmB;IAAC3B,KAAK,EAAC;KAAoB,IAAE,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}