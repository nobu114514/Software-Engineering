{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"seller-dashboard\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"alert alert-danger\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"active-products\"\n};\nconst _hoisted_5 = {\n  class: \"product-list\"\n};\nconst _hoisted_6 = {\n  class: \"actions\"\n};\nconst _hoisted_7 = [\"onClick\", \"disabled\"];\nconst _hoisted_8 = [\"href\"];\nconst _hoisted_9 = {\n  key: 3,\n  class: \"alert alert-danger\"\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createStaticVNode(\"<h1 data-v-3499bfea>卖家后台</h1><div class=\\\"dashboard-menu\\\" data-v-3499bfea><a href=\\\"/seller/product/new\\\" class=\\\"btn\\\" data-v-3499bfea>发布新商品</a><a href=\\\"/seller/products\\\" class=\\\"btn\\\" data-v-3499bfea>商品历史</a><a href=\\\"/seller/buyers\\\" class=\\\"btn\\\" data-v-3499bfea>购买意向列表</a><a href=\\\"/seller/customers\\\" class=\\\"btn\\\" data-v-3499bfea>客户管理</a><a href=\\\"/seller/change-password\\\" class=\\\"btn\\\" data-v-3499bfea>修改密码</a><a href=\\\"/\\\" class=\\\"btn\\\" data-v-3499bfea>返回买家平台</a></div>\", 2)), _ctx.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"加载中...\")) : _createCommentVNode(\"v-if\", true), _ctx.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString(_ctx.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !_ctx.loading && _ctx.activeProducts.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"当前在售商品列表\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.activeProducts, product => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: product.id,\n      class: \"card product-card\"\n    }, [_createElementVNode(\"h3\", null, _toDisplayString(product.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"价格: ¥\" + _toDisplayString(product.price.toFixed(2)), 1 /* TEXT */), _createElementVNode(\"p\", null, \"状态: \" + _toDisplayString(product.frozen ? '交易中（已冻结）' : '可购买'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n      class: \"btn\",\n      onClick: $event => _ctx.toggleFreeze(product.id),\n      disabled: !product\n    }, _toDisplayString(product.frozen ? '解除冻结' : '冻结商品'), 9 /* TEXT, PROPS */, _hoisted_7), _createElementVNode(\"a\", {\n      href: '/seller/product/new?id=' + product.id,\n      class: \"btn\"\n    }, \"编辑商品\", 8 /* PROPS */, _hoisted_8)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), !_ctx.loading && _ctx.activeProducts.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \" 当前没有在售商品，请发布新商品。 \")) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_ctx","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","activeProducts","length","_hoisted_4","_createElementVNode","_hoisted_5","_Fragment","_renderList","product","key","id","name","price","toFixed","frozen","_hoisted_6","onClick","$event","toggleFreeze","disabled","_hoisted_7","href","_hoisted_8","_hoisted_9"],"sources":["F:\\作业\\Software-Engineering2.0\\litemall\\simple-shop-frontend\\frontend\\src\\views\\SellerDashboard.vue"],"sourcesContent":["<template>\n  <div class=\"seller-dashboard\">\n    <h1>卖家后台</h1>\n    \n    <div class=\"dashboard-menu\">\n      <a href=\"/seller/product/new\" class=\"btn\">发布新商品</a>\n      <a href=\"/seller/products\" class=\"btn\">商品历史</a>\n      <a href=\"/seller/buyers\" class=\"btn\">购买意向列表</a>\n      <a href=\"/seller/customers\" class=\"btn\">客户管理</a>\n      <a href=\"/seller/change-password\" class=\"btn\">修改密码</a>\n      <a href=\"/\" class=\"btn\">返回买家平台</a>\n    </div>\n    \n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    \n    <div v-if=\"error\" class=\"alert alert-danger\">\n      {{ error }}\n    </div>\n    \n    <div v-if=\"!loading && activeProducts.length > 0\" class=\"active-products\">\n      <h2>当前在售商品列表</h2>\n      <div class=\"product-list\">\n        <div v-for=\"product in activeProducts\" :key=\"product.id\" class=\"card product-card\">\n          <h3>{{ product.name }}</h3>\n          <p>价格: ¥{{ product.price.toFixed(2) }}</p>\n          <p>状态: {{ product.frozen ? '交易中（已冻结）' : '可购买' }}</p>\n          \n          <div class=\"actions\">\n            <button \n              class=\"btn\" \n              @click=\"toggleFreeze(product.id)\"\n              :disabled=\"!product\">\n              {{ product.frozen ? '解除冻结' : '冻结商品' }}\n            </button>\n            <a :href=\"'/seller/product/new?id=' + product.id\" class=\"btn\">编辑商品</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div v-if=\"!loading && activeProducts.length === 0\" class=\"alert alert-danger\">\n      当前没有在售商品，请发布新商品。\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n45|   name: 'SellerDashboard',\n  data() {\n    return {\n      activeProduct: null,\n      loading: true,\n      error: ''\n    }\n  },\n  created() {\n    this.fetchActiveProduct()\n  },\n  methods: {\n    async fetchActiveProduct() {\n      try {\n        this.loading = true\n        const response = await this.$axios.get('/products/active')\n        this.activeProduct = response.data\n        this.error = ''\n      } catch (err) {\n        this.error = '获取商品信息失败'\n        console.error(err)\n      } finally {\n        this.loading = false\n      }\n    },\n    async toggleFreeze() {\n      if (!this.activeProduct) return\n\n      try {\n        // 修复：添加 /api 前缀 + 字段名改为 frozen\n        await this.$axios.put(`/products/${this.activeProduct.id}/freeze`, null, {\n          params: { freeze: !this.activeProduct.frozen }\n        })\n        // 修复：字段名改为 frozen\n        this.activeProduct.frozen = !this.activeProduct.frozen\n        // （可选优化）清空之前的错误提示\n        this.error = ''\n      } catch (err) {\n        this.error = '操作失败，请重试'\n        console.error(err)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.actions {\n  margin-top: 1rem;\n  display: flex;\n  gap: 1rem;\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n  font-size: 1.2rem;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;;EAYPA,KAAK,EAAC;;;;EAERA,KAAK,EAAC;;;;EAI0BA,KAAK,EAAC;;;EAEjDA,KAAK,EAAC;AAAc;;EAMhBA,KAAK,EAAC;AAAS;;;;;EAa0BA,KAAK,EAAC;;;uBAvC5DC,mBAAA,CA0CM,OA1CNC,UA0CM,G,whBA9BOC,IAAA,CAAAC,OAAO,I,cAAlBH,mBAAA,CAAgD,OAAhDI,UAAgD,EAAZ,QAAM,K,mCAE/BF,IAAA,CAAAG,KAAK,I,cAAhBL,mBAAA,CAEM,OAFNM,UAEM,EAAAC,gBAAA,CADDL,IAAA,CAAAG,KAAK,oB,oCAGEH,IAAA,CAAAC,OAAO,IAAID,IAAA,CAAAM,cAAc,CAACC,MAAM,Q,cAA5CT,mBAAA,CAmBM,OAnBNU,UAmBM,G,0BAlBJC,mBAAA,CAAiB,YAAb,UAAQ,qBACZA,mBAAA,CAgBM,OAhBNC,UAgBM,I,kBAfJZ,mBAAA,CAcMa,SAAA,QAAAC,WAAA,CAdiBZ,IAAA,CAAAM,cAAc,EAAzBO,OAAO;yBAAnBf,mBAAA,CAcM;MAdkCgB,GAAG,EAAED,OAAO,CAACE,EAAE;MAAElB,KAAK,EAAC;QAC7DY,mBAAA,CAA2B,YAAAJ,gBAAA,CAApBQ,OAAO,CAACG,IAAI,kBACnBP,mBAAA,CAA0C,WAAvC,OAAK,GAAAJ,gBAAA,CAAGQ,OAAO,CAACI,KAAK,CAACC,OAAO,qBAChCT,mBAAA,CAAoD,WAAjD,MAAI,GAAAJ,gBAAA,CAAGQ,OAAO,CAACM,MAAM,uCAExBV,mBAAA,CAQM,OARNW,UAQM,GAPJX,mBAAA,CAKS;MAJPZ,KAAK,EAAC,KAAK;MACVwB,OAAK,EAAAC,MAAA,IAAEtB,IAAA,CAAAuB,YAAY,CAACV,OAAO,CAACE,EAAE;MAC9BS,QAAQ,GAAGX;wBACTA,OAAO,CAACM,MAAM,0CAAAM,UAAA,GAEnBhB,mBAAA,CAAsE;MAAlEiB,IAAI,8BAA8Bb,OAAO,CAACE,EAAE;MAAElB,KAAK,EAAC;OAAM,MAAI,iBAAA8B,UAAA,E;4EAM9D3B,IAAA,CAAAC,OAAO,IAAID,IAAA,CAAAM,cAAc,CAACC,MAAM,U,cAA5CT,mBAAA,CAEM,OAFN8B,UAEM,EAFyE,oBAE/E,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}