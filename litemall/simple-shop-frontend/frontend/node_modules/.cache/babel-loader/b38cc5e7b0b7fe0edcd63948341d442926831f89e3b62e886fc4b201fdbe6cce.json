{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport SellerLogin from '../views/SellerLogin.vue';\nimport CustomerLogin from '../views/CustomerLogin.vue';\nimport CustomerRegister from '../views/CustomerRegister.vue';\nimport SellerDashboard from '../views/SellerDashboard.vue';\nimport ProductForm from '../views/ProductForm.vue';\nimport ProductHistory from '../views/ProductHistory.vue';\nimport BuyerList from '../views/BuyerList.vue';\nimport ChangePassword from '../views/ChangePassword.vue';\nimport CustomerList from '../views/CustomerList.vue';\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView\n}, {\n  path: '/login',\n  name: 'customerLogin',\n  component: CustomerLogin\n}, {\n  path: '/register',\n  name: 'customerRegister',\n  component: CustomerRegister\n}, {\n  path: '/seller/login',\n  name: 'sellerLogin',\n  component: SellerLogin\n}, {\n  path: '/seller/dashboard',\n  name: 'sellerDashboard',\n  component: SellerDashboard,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/product/new',\n  name: 'newProduct',\n  component: ProductForm,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/products',\n  name: 'productHistory',\n  component: ProductHistory,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/buyers',\n  name: 'buyerList',\n  component: BuyerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/change-password',\n  name: 'changePassword',\n  component: ChangePassword,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/customers',\n  name: 'customerList',\n  component: CustomerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 路由守卫，检查是否已登录\nrouter.beforeEach((to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  if (requiresAuth) {\n    const record = to.matched.find(r => r.meta.role);\n    // 检查是否需要卖家登录\n    if (record && record.meta.role === 'seller') {\n      if (!localStorage.getItem('sellerLoggedIn')) {\n        next({\n          name: 'sellerLogin'\n        });\n      } else {\n        next();\n      }\n    } else {\n      // 其他需要登录的页面（客户）\n      if (!localStorage.getItem('customerLoggedIn')) {\n        next({\n          name: 'customerLogin'\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","HomeView","SellerLogin","CustomerLogin","CustomerRegister","SellerDashboard","ProductForm","ProductHistory","BuyerList","ChangePassword","CustomerList","routes","path","name","component","meta","requiresAuth","role","router","history","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","find","r","localStorage","getItem"],"sources":["F:/作业/git/Software-Engineering/litemall/simple-shop-frontend/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport HomeView from '../views/HomeView.vue'\r\nimport SellerLogin from '../views/SellerLogin.vue'\r\nimport CustomerLogin from '../views/CustomerLogin.vue'\r\nimport CustomerRegister from '../views/CustomerRegister.vue'\r\nimport SellerDashboard from '../views/SellerDashboard.vue'\r\nimport ProductForm from '../views/ProductForm.vue'\r\nimport ProductHistory from '../views/ProductHistory.vue'\r\nimport BuyerList from '../views/BuyerList.vue'\r\nimport ChangePassword from '../views/ChangePassword.vue'\r\nimport CustomerList from '../views/CustomerList.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'home',\r\n    component: HomeView\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'customerLogin',\r\n    component: CustomerLogin\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'customerRegister',\r\n    component: CustomerRegister\r\n  },\r\n  {\r\n    path: '/seller/login',\r\n    name: 'sellerLogin',\r\n    component: SellerLogin\r\n  },\r\n  {\r\n    path: '/seller/dashboard',\r\n    name: 'sellerDashboard',\r\n    component: SellerDashboard,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/product/new',\r\n    name: 'newProduct',\r\n    component: ProductForm,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/products',\r\n    name: 'productHistory',\r\n    component: ProductHistory,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/buyers',\r\n    name: 'buyerList',\r\n    component: BuyerList,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/change-password',\r\n    name: 'changePassword',\r\n    component: ChangePassword,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/customers',\r\n    name: 'customerList',\r\n    component: CustomerList,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// 路由守卫，检查是否已登录\r\nrouter.beforeEach((to, from, next) => {\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\r\n  \r\n  if (requiresAuth) {\r\n    const record = to.matched.find(r => r.meta.role);\r\n    // 检查是否需要卖家登录\r\n    if (record && record.meta.role === 'seller') {\r\n      if (!localStorage.getItem('sellerLoggedIn')) {\r\n        next({ name: 'sellerLogin' })\r\n      } else {\r\n        next()\r\n      }\r\n    } else {\r\n      // 其他需要登录的页面（客户）\r\n      if (!localStorage.getItem('customerLoggedIn')) {\r\n        next({ name: 'customerLogin' })\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}