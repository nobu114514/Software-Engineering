{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport SellerLogin from '../views/SellerLogin.vue';\nimport CustomerLogin from '../views/CustomerLogin.vue';\nimport CustomerRegister from '../views/CustomerRegister.vue';\nimport SellerDashboard from '../views/SellerDashboard.vue';\nimport ProductForm from '../views/ProductForm.vue';\nimport ProductHistory from '../views/ProductHistory.vue';\nimport BuyerList from '../views/BuyerList.vue';\nimport ChangePassword from '../views/ChangePassword.vue';\nimport CustomerList from '../views/CustomerList.vue';\nimport CustomerOrders from '../views/CustomerOrders.vue';\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView\n}, {\n  path: '/product/:id',\n  name: 'productDetail',\n  component: () => import('../views/ProductDetail.vue')\n}, {\n  path: '/login',\n  name: 'customerLogin',\n  component: CustomerLogin\n}, {\n  path: '/register',\n  name: 'customerRegister',\n  component: CustomerRegister\n}, {\n  path: '/seller/login',\n  name: 'sellerLogin',\n  component: SellerLogin\n}, {\n  path: '/seller/dashboard',\n  name: 'sellerDashboard',\n  component: SellerDashboard,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/product/new',\n  name: 'newProduct',\n  component: ProductForm,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/products',\n  name: 'productHistory',\n  component: ProductHistory,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/buyers',\n  name: 'buyerList',\n  component: BuyerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/change-password',\n  name: 'changePassword',\n  component: ChangePassword,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/orders',\n  name: 'customerOrders',\n  component: CustomerOrders,\n  meta: {\n    requiresAuth: true,\n    role: 'customer'\n  }\n}, {\n  path: '/seller/customers',\n  name: 'customerList',\n  component: CustomerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 路由守卫，检查是否已登录\nrouter.beforeEach((to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  if (requiresAuth) {\n    const record = to.matched.find(r => r.meta.role);\n    // 检查是否需要卖家登录\n    if (record && record.meta.role === 'seller') {\n      if (!localStorage.getItem('sellerLoggedIn')) {\n        next({\n          name: 'sellerLogin'\n        });\n      } else {\n        next();\n      }\n    } else {\n      // 其他需要登录的页面（客户）\n      if (!localStorage.getItem('customerLoggedIn')) {\n        next({\n          name: 'customerLogin'\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","HomeView","SellerLogin","CustomerLogin","CustomerRegister","SellerDashboard","ProductForm","ProductHistory","BuyerList","ChangePassword","CustomerList","CustomerOrders","routes","path","name","component","meta","requiresAuth","role","router","history","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","find","r","localStorage","getItem"],"sources":["D:/game/Trae/存档/Software-Engineering2.0/Software-Engineering-9bea62c8ef6d7754a2d932a0227f9bc4fff09a3c/litemall/simple-shop-frontend/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\nimport HomeView from '../views/HomeView.vue'\nimport SellerLogin from '../views/SellerLogin.vue'\nimport CustomerLogin from '../views/CustomerLogin.vue'\nimport CustomerRegister from '../views/CustomerRegister.vue'\nimport SellerDashboard from '../views/SellerDashboard.vue'\nimport ProductForm from '../views/ProductForm.vue'\nimport ProductHistory from '../views/ProductHistory.vue'\nimport BuyerList from '../views/BuyerList.vue'\nimport ChangePassword from '../views/ChangePassword.vue'\nimport CustomerList from '../views/CustomerList.vue'\nimport CustomerOrders from '../views/CustomerOrders.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    component: HomeView\n  },\n  {\n    path: '/product/:id',\n    name: 'productDetail',\n    component: () => import('../views/ProductDetail.vue')\n  },\n  {\n    path: '/login',\n    name: 'customerLogin',\n    component: CustomerLogin\n  },\n  {\n    path: '/register',\n    name: 'customerRegister',\n    component: CustomerRegister\n  },\n  {\n    path: '/seller/login',\n    name: 'sellerLogin',\n    component: SellerLogin\n  },\n  {\n    path: '/seller/dashboard',\n    name: 'sellerDashboard',\n    component: SellerDashboard,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  {\n    path: '/seller/product/new',\n    name: 'newProduct',\n    component: ProductForm,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  {\n    path: '/seller/products',\n    name: 'productHistory',\n    component: ProductHistory,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  {\n    path: '/seller/buyers',\n    name: 'buyerList',\n    component: BuyerList,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  {\n    path: '/seller/change-password',\n    name: 'changePassword',\n    component: ChangePassword,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  {\n    path: '/orders',\n    name: 'customerOrders',\n    component: CustomerOrders,\n    meta: { requiresAuth: true, role: 'customer' }\n  },\n  {\n    path: '/seller/customers',\n    name: 'customerList',\n    component: CustomerList,\n    meta: { requiresAuth: true, role: 'seller' }\n  },\n  ]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\n// 路由守卫，检查是否已登录\nrouter.beforeEach((to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  \n  if (requiresAuth) {\n    const record = to.matched.find(r => r.meta.role);\n    // 检查是否需要卖家登录\n    if (record && record.meta.role === 'seller') {\n      if (!localStorage.getItem('sellerLoggedIn')) {\n        next({ name: 'sellerLogin' })\n      } else {\n        next()\n      }\n    } else {\n      // 其他需要登录的页面（客户）\n      if (!localStorage.getItem('customerLoggedIn')) {\n        next({ name: 'customerLogin' })\n      } else {\n        next()\n      }\n    }\n  } else {\n    next()\n  }\n})\n\nexport default router\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}