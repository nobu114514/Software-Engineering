# 拼夕夕在线购物系统 - 项目设计开发说明

## 1. 项目概述

拼夕夕在线购物系统是一个基于前后端分离架构的在线购物平台，旨在提供便捷的商品浏览、购买意向提交和卖家管理功能。系统支持买家浏览商品、提交购买意向，同时为卖家提供商品管理和订单处理能力。

## 2. 系统架构

### 2.1 整体架构

系统采用典型的前后端分离架构，具有良好的扩展性和可维护性：

- **后端**：基于 Spring Boot 2.7.0 框架开发，提供 RESTful API 接口
- **前端**：采用 Vue 3 + Vue Router + Axios 技术栈构建单页应用
- **数据库**：使用 MySQL 8.0 作为持久化存储

### 2.2 技术栈选择

| 类别 | 技术/框架 | 版本 | 用途 |
|------|-----------|------|------|
| 后端框架 | Spring Boot | 2.7.0 | 提供Web应用基础框架 |
| 数据访问 | Spring Data JPA | 2.7.0 | 简化数据库操作 |
| 数据库 | MySQL | 8.0+ | 数据持久化存储 |
| 前端框架 | Vue | 3.x | 构建用户界面 |
| 前端路由 | Vue Router | - | 页面路由管理 |
| HTTP客户端 | Axios | - | API请求处理 |
| 容器化 | Docker | - | 应用容器化部署 |

## 3. 数据模型设计

系统采用关系型数据库设计，主要包含以下核心数据实体：

### 3.1 商品（Product）

```java
@Entity
@Table(name = "products")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    
    @Column(length = 1000)
    private String description;
    
    private String imageUrl;
    
    private double price;
    
    private boolean isActive; // 商品是否上线
    
    private boolean isFrozen; // 商品是否冻结（交易中）
    
    private LocalDateTime createdAt;
    
    private LocalDateTime updatedAt;
    
    // Getters and Setters
}
```

### 3.2 卖家（Seller）

```java
@Entity
@Table(name = "seller")
public class Seller {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String username;
    
    private String password; // 实际应用中应存储加密后的密码
    
    private LocalDateTime updatedAt;
    
    // Getters and Setters
}
```

### 3.3 买家（Buyer）

```java
@Entity
@Table(name = "buyers")
public class Buyer {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    
    private String phone;
    
    private String address;
    
    private String notes; // 购买备注
    
    @ManyToOne
    @JoinColumn(name = "product_id")
    private Product product;
    
    private boolean isCompleted; // 交易是否完成
    
    private LocalDateTime createdAt;
    
    // Getters and Setters
}
```

### 3.4 购买意向（PurchaseIntention）

根据数据库初始化脚本，系统还包含购买意向表，用于记录用户的购买意向信息：

```sql
CREATE TABLE purchase_intention (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    product_id BIGINT NOT NULL,
    buyer_name VARCHAR(255) NOT NULL,
    buyer_phone VARCHAR(20) NOT NULL,
    buyer_address VARCHAR(255),
    message TEXT,
    status ENUM('PENDING', 'SUCCESS', 'FAILED') DEFAULT 'PENDING',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES product(id)
);
```

## 4. 核心功能模块

### 4.1 商品管理模块

商品管理是系统的核心功能之一，提供完整的商品生命周期管理：

- **商品列表展示**：展示所有商品信息，支持筛选和排序
- **商品详情查看**：显示单个商品的详细信息
- **商品创建与更新**：卖家可以添加新商品和编辑现有商品
- **商品状态管理**：
  - 激活（上架）商品
  - 冻结商品（交易进行中）
  - 下架商品

商品管理通过 `ProductController` 和 `ProductService` 实现，提供以下主要API端点：

```java
@RestController
@RequestMapping("/api/products")
public class ProductController {
    // 获取所有商品
    @GetMapping
    
    // 获取指定商品
    @GetMapping("/{id}")
    
    // 创建新商品
    @PostMapping
    
    // 更新商品信息
    @PutMapping("/{id}")
    
    // 冻结/解冻商品
    @PutMapping("/{id}/freeze")
    
    // 下架商品
    @PutMapping("/{id}/deactivate")
    
    // 激活商品（并自动下架其他商品）
    @PutMapping("/{id}/activate")
}
```

### 4.2 卖家管理模块

卖家管理模块提供卖家身份认证和账户管理功能：

- **卖家登录**：验证卖家身份，提供访问权限
- **密码修改**：允许卖家更改登录密码
- **初始化卖家**：系统自动创建初始卖家账号

卖家管理通过 `SellerController` 和 `SellerService` 实现：

```java
@RestController
@RequestMapping("/api/seller")
public class SellerController {
    // 初始化卖家账号
    @PostConstruct
    
    // 卖家登录
    @PostMapping("/login")
    
    // 修改密码
    @PostMapping("/change-password")
}
```

### 4.3 购买意向处理模块

该模块处理买家的购买请求，记录购买意向并管理交易状态：

- **提交购买意向**：买家填写联系信息提交购买请求
- **购买意向状态管理**：卖家可以更新购买意向的状态（待处理、成功、失败）
- **购买意向查询**：卖家可以查看所有购买意向记录

## 5. 前端界面设计

### 5.1 整体布局

前端采用现代化的响应式设计，整体布局包括：

- **导航栏**：显示系统名称、主要功能入口，根据登录状态动态显示卖家入口或后台入口
- **主内容区**：显示当前页面内容，通过路由动态切换
- **页脚**：显示版权信息

```vue
<template>
  <div id="app">
    <nav class="navbar">
      <div class="navbar-container">
        <a href="/" class="navbar-logo">拼夕夕</a>
        <div class="navbar-menu">
          <a href="/seller/login" v-if="!isSellerLoggedIn">卖家入口</a>
          <a href="/seller/dashboard" v-if="isSellerLoggedIn">卖家后台</a>
          <button @click="logout" v-if="isSellerLoggedIn">退出登录</button>
        </div>
      </div>
    </nav>
    <main class="container">
      <router-view />
    </main>
    <footer class="footer">
      <p>拼夕夕</p>
    </footer>
  </div>
</template>
```

### 5.2 主要页面

- **首页**：展示商品列表和主要功能入口
- **商品详情页**：展示单个商品的详细信息，提供购买入口
- **购买意向提交页**：买家填写联系信息提交购买请求
- **卖家登录页**：卖家登录入口
- **卖家后台**：提供商品管理、订单管理等功能

## 6. 项目结构

### 6.1 后端项目结构

```
simple-shop-backend/backend/
├── src/
│   ├── main/
│   │   ├── java/com/shop/
│   │   │   ├── controller/   # 控制器层
│   │   │   ├── model/        # 数据模型层
│   │   │   ├── repository/   # 数据访问层
│   │   │   ├── service/      # 业务逻辑层
│   │   │   └── SimpleShopApplication.java  # 应用入口
│   │   └── resources/
│   │       └── application.properties  # 应用配置
│   └── test/                 # 测试代码
└── pom.xml                   # Maven配置
```

### 6.2 前端项目结构

```
simple-shop-frontend/frontend/
├── src/
│   ├── components/           # Vue组件
│   ├── views/                # 页面视图
│   ├── router/               # 路由配置
│   ├── services/             # API服务
│   ├── App.vue               # 根组件
│   └── main.js               # 应用入口
├── package.json              # NPM配置
└── vue.config.js             # Vue配置
```

## 7. 部署与运行

### 7.1 环境要求

- **后端环境**：
  - JDK 11 或更高版本
  - Maven 3.6.0 或更高版本
  - MySQL 8.0 或更高版本

- **前端环境**：
  - Node.js 14.x 或更高版本
  - npm 6.x 或更高版本

### 7.2 数据库配置

1. 创建数据库：
```sql
CREATE DATABASE simple_shop CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. 初始化数据表：
   - 执行 `说明.txt` 中提供的SQL脚本创建数据表结构
   - 系统会自动初始化卖家账号

### 7.3 应用配置

- **后端配置**：修改 `application.properties` 文件中的数据库连接信息
- **前端配置**：修改 `main.js` 中的API基础URL

### 7.4 构建与运行

系统提供了自动化构建和启动脚本，简化部署流程：

- **构建脚本**：
  - `build-all.bat`：构建整个项目
  - `build-simple.bat`：简单构建检查

- **启动脚本**：
  - `start-all.bat`：启动所有服务
  - `start-backend.bat`：仅启动后端服务
  - `start-frontend.bat`：仅启动前端服务

## 8. 系统安全考虑

- **密码安全**：卖家密码应进行加密存储（当前实现中待完善）
- **权限控制**：卖家功能需要身份验证才能访问
- **输入验证**：所有用户输入应进行验证和过滤
- **CORS配置**：正确配置跨域资源共享

## 9. 总结与展望

拼夕夕在线购物系统是一个功能完整的在线购物平台，采用现代化的前后端分离架构。系统实现了商品管理、购买意向处理和卖家管理等核心功能，提供了良好的用户体验和管理能力。

未来可以考虑的改进方向包括：

- 完善用户认证和授权机制
- 添加商品分类和搜索功能
- 实现完整的购物车和订单管理系统
- 优化前端用户界面和交互体验
- 增加支付集成功能
- 添加数据分析和统计报表

系统设计注重模块化和可扩展性，为后续功能扩展提供了良好的基础。