{"ast":null,"code":"export default {\n  name: 'ImageCarousel',\n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    images: {\n      type: Array,\n      default: () => []\n    },\n    initialIndex: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      currentIndex: 0,\n      defaultImage: 'https://img.pngsucai.com/00/87/02/31a2f72e4e901438.webp'\n    };\n  },\n  computed: {\n    currentImage() {\n      if (this.images.length === 0) return this.defaultImage;\n      return this.images[this.currentIndex] || this.defaultImage;\n    }\n  },\n  watch: {\n    show(newVal) {\n      if (newVal) {\n        this.currentIndex = Math.min(this.initialIndex, this.images.length - 1);\n        this.addKeydownListener();\n      } else {\n        this.removeKeydownListener();\n      }\n    }\n  },\n  beforeUnmount() {\n    this.removeKeydownListener();\n  },\n  methods: {\n    nextImage() {\n      if (this.currentIndex < this.images.length - 1) {\n        this.currentIndex++;\n      }\n    },\n    prevImage() {\n      if (this.currentIndex > 0) {\n        this.currentIndex--;\n      }\n    },\n    goToImage(index) {\n      if (index >= 0 && index < this.images.length) {\n        this.currentIndex = index;\n      }\n    },\n    close() {\n      this.$emit('close');\n    },\n    handleImageError(e) {\n      e.target.src = this.defaultImage;\n    },\n    addKeydownListener() {\n      document.addEventListener('keydown', this.handleKeydown);\n    },\n    removeKeydownListener() {\n      document.removeEventListener('keydown', this.handleKeydown);\n    },\n    handleKeydown(e) {\n      switch (e.key) {\n        case 'ArrowRight':\n          this.nextImage();\n          break;\n        case 'ArrowLeft':\n          this.prevImage();\n          break;\n        case 'Escape':\n          this.close();\n          break;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","show","type","Boolean","default","images","Array","initialIndex","Number","data","currentIndex","defaultImage","computed","currentImage","length","watch","newVal","Math","min","addKeydownListener","removeKeydownListener","beforeUnmount","methods","nextImage","prevImage","goToImage","index","close","$emit","handleImageError","e","target","src","document","addEventListener","handleKeydown","removeEventListener","key"],"sources":["D:\\game\\Trae\\litemall\\simple-shop-frontend\\frontend\\src\\components\\ImageCarousel.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"show\" class=\"image-carousel-overlay\" @click.self=\"close\">\r\n    <div class=\"image-carousel-container\">\r\n      <button class=\"close-btn\" @click=\"close\">&times;</button>\r\n      \r\n      <button class=\"nav-btn prev-btn\" @click=\"prevImage\" :disabled=\"currentIndex === 0\">\r\n        &lt;\r\n      </button>\r\n      \r\n      <div class=\"carousel-image-wrapper\">\r\n        <img \r\n          :src=\"currentImage\" \r\n          :alt=\"`图片 ${currentIndex + 1}/${images.length}`\"\r\n          class=\"carousel-image\"\r\n          @error=\"handleImageError\"\r\n        >\r\n      </div>\r\n      \r\n      <button class=\"nav-btn next-btn\" @click=\"nextImage\" :disabled=\"currentIndex === images.length - 1\">\r\n        &gt;\r\n      </button>\r\n      \r\n      <div class=\"carousel-indicators\">\r\n        <span \r\n          v-for=\"(img, index) in images\" \r\n          :key=\"index\"\r\n          class=\"indicator\"\r\n          :class=\"{ active: index === currentIndex }\"\r\n          @click=\"goToImage(index)\"\r\n        ></span>\r\n      </div>\r\n      \r\n      <div class=\"carousel-counter\">\r\n        {{ currentIndex + 1 }} / {{ images.length }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ImageCarousel',\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    images: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    initialIndex: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentIndex: 0,\r\n      defaultImage: 'https://img.pngsucai.com/00/87/02/31a2f72e4e901438.webp'\r\n    }\r\n  },\r\n  computed: {\r\n    currentImage() {\r\n      if (this.images.length === 0) return this.defaultImage;\r\n      return this.images[this.currentIndex] || this.defaultImage;\r\n    }\r\n  },\r\n  watch: {\r\n    show(newVal) {\r\n      if (newVal) {\r\n        this.currentIndex = Math.min(this.initialIndex, this.images.length - 1);\r\n        this.addKeydownListener();\r\n      } else {\r\n        this.removeKeydownListener();\r\n      }\r\n    }\r\n  },\r\n  beforeUnmount() {\r\n    this.removeKeydownListener();\r\n  },\r\n  methods: {\r\n    nextImage() {\r\n      if (this.currentIndex < this.images.length - 1) {\r\n        this.currentIndex++;\r\n      }\r\n    },\r\n    prevImage() {\r\n      if (this.currentIndex > 0) {\r\n        this.currentIndex--;\r\n      }\r\n    },\r\n    goToImage(index) {\r\n      if (index >= 0 && index < this.images.length) {\r\n        this.currentIndex = index;\r\n      }\r\n    },\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n    handleImageError(e) {\r\n      e.target.src = this.defaultImage;\r\n    },\r\n    addKeydownListener() {\r\n      document.addEventListener('keydown', this.handleKeydown);\r\n    },\r\n    removeKeydownListener() {\r\n      document.removeEventListener('keydown', this.handleKeydown);\r\n    },\r\n    handleKeydown(e) {\r\n      switch(e.key) {\r\n        case 'ArrowRight':\r\n          this.nextImage();\r\n          break;\r\n        case 'ArrowLeft':\r\n          this.prevImage();\r\n          break;\r\n        case 'Escape':\r\n          this.close();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image-carousel-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.9);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.image-carousel-container {\r\n  position: relative;\r\n  width: 90%;\r\n  height: 80%;\r\n  max-width: 1200px;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: -40px;\r\n  right: 0;\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 2.5rem;\r\n  cursor: pointer;\r\n  z-index: 10;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.close-btn:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.nav-btn {\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  color: white;\r\n  border: none;\r\n  font-size: 2rem;\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: background-color 0.3s;\r\n  z-index: 5;\r\n}\r\n\r\n.nav-btn:hover:not(:disabled) {\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n\r\n.nav-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.prev-btn {\r\n  left: 20px;\r\n}\r\n\r\n.next-btn {\r\n  right: 20px;\r\n}\r\n\r\n.carousel-image-wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.carousel-image {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: contain;\r\n}\r\n\r\n.carousel-indicators {\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.indicator {\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.indicator.active {\r\n  background-color: white;\r\n  width: 20px;\r\n  border-radius: 6px;\r\n}\r\n\r\n.carousel-counter {\r\n  position: absolute;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  color: white;\r\n  padding: 5px 10px;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .image-carousel-container {\r\n    width: 95%;\r\n    height: 70%;\r\n  }\r\n  \r\n  .nav-btn {\r\n    font-size: 1.5rem;\r\n    width: 40px;\r\n    height: 40px;\r\n  }\r\n  \r\n  .prev-btn {\r\n    left: 10px;\r\n  }\r\n  \r\n  .next-btn {\r\n    right: 10px;\r\n  }\r\n}\r\n</style>"],"mappings":"AAwCA,eAAe;EACbA,IAAI,EAAE,eAAe;EACrBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,OAAO;MACbC,OAAO,EAAE;IACX,CAAC;IACDC,MAAM,EAAE;MACNH,IAAI,EAAEI,KAAK;MACXF,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAC;IACDG,YAAY,EAAE;MACZL,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACX;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,YAAYA,CAAA,EAAG;MACb,IAAI,IAAI,CAACR,MAAM,CAACS,MAAK,KAAM,CAAC,EAAE,OAAO,IAAI,CAACH,YAAY;MACtD,OAAO,IAAI,CAACN,MAAM,CAAC,IAAI,CAACK,YAAY,KAAK,IAAI,CAACC,YAAY;IAC5D;EACF,CAAC;EACDI,KAAK,EAAE;IACLd,IAAIA,CAACe,MAAM,EAAE;MACX,IAAIA,MAAM,EAAE;QACV,IAAI,CAACN,YAAW,GAAIO,IAAI,CAACC,GAAG,CAAC,IAAI,CAACX,YAAY,EAAE,IAAI,CAACF,MAAM,CAACS,MAAK,GAAI,CAAC,CAAC;QACvE,IAAI,CAACK,kBAAkB,CAAC,CAAC;MAC3B,OAAO;QACL,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC9B;IACF;EACF,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,CAACD,qBAAqB,CAAC,CAAC;EAC9B,CAAC;EACDE,OAAO,EAAE;IACPC,SAASA,CAAA,EAAG;MACV,IAAI,IAAI,CAACb,YAAW,GAAI,IAAI,CAACL,MAAM,CAACS,MAAK,GAAI,CAAC,EAAE;QAC9C,IAAI,CAACJ,YAAY,EAAE;MACrB;IACF,CAAC;IACDc,SAASA,CAAA,EAAG;MACV,IAAI,IAAI,CAACd,YAAW,GAAI,CAAC,EAAE;QACzB,IAAI,CAACA,YAAY,EAAE;MACrB;IACF,CAAC;IACDe,SAASA,CAACC,KAAK,EAAE;MACf,IAAIA,KAAI,IAAK,KAAKA,KAAI,GAAI,IAAI,CAACrB,MAAM,CAACS,MAAM,EAAE;QAC5C,IAAI,CAACJ,YAAW,GAAIgB,KAAK;MAC3B;IACF,CAAC;IACDC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;IACrB,CAAC;IACDC,gBAAgBA,CAACC,CAAC,EAAE;MAClBA,CAAC,CAACC,MAAM,CAACC,GAAE,GAAI,IAAI,CAACrB,YAAY;IAClC,CAAC;IACDQ,kBAAkBA,CAAA,EAAG;MACnBc,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,aAAa,CAAC;IAC1D,CAAC;IACDf,qBAAqBA,CAAA,EAAG;MACtBa,QAAQ,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,aAAa,CAAC;IAC7D,CAAC;IACDA,aAAaA,CAACL,CAAC,EAAE;MACf,QAAOA,CAAC,CAACO,GAAG;QACV,KAAK,YAAY;UACf,IAAI,CAACd,SAAS,CAAC,CAAC;UAChB;QACF,KAAK,WAAW;UACd,IAAI,CAACC,SAAS,CAAC,CAAC;UAChB;QACF,KAAK,QAAQ;UACX,IAAI,CAACG,KAAK,CAAC,CAAC;UACZ;MACJ;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}