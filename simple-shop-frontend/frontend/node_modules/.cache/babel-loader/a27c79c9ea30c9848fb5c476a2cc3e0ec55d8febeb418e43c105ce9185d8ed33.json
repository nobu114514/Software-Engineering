{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport SellerLogin from '../views/SellerLogin.vue';\nimport CustomerLogin from '../views/CustomerLogin.vue';\nimport CustomerRegister from '../views/CustomerRegister.vue';\nimport SellerDashboard from '../views/SellerDashboard.vue';\nimport ProductForm from '../views/ProductForm.vue';\nimport ProductHistory from '../views/ProductHistory.vue';\nimport BuyerList from '../views/BuyerList.vue';\nimport ChangePassword from '../views/ChangePassword.vue';\nimport CustomerList from '../views/CustomerList.vue';\nimport CustomerOrders from '../views/CustomerOrders.vue';\nimport ProductBatchForm from '../views/ProductBatchForm.vue';\nimport SellerCategories from '../views/SellerCategories.vue';\nimport SellerSubCategories from '../views/SellerSubCategories.vue';\nimport StockLogs from '../views/StockLogs.vue';\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView\n}, {\n  path: '/product/:id',\n  name: 'productDetail',\n  component: () => import('../views/ProductDetail.vue')\n}, {\n  path: '/login',\n  name: 'customerLogin',\n  component: CustomerLogin\n}, {\n  path: '/register',\n  name: 'customerRegister',\n  component: CustomerRegister\n}, {\n  path: '/seller/login',\n  name: 'sellerLogin',\n  component: SellerLogin\n}, {\n  path: '/seller/dashboard',\n  name: 'sellerDashboard',\n  component: SellerDashboard,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/product/new',\n  name: 'newProduct',\n  component: ProductForm,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/product/batch',\n  name: 'batchProductForm',\n  component: ProductBatchForm,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/products',\n  name: 'productHistory',\n  component: ProductHistory,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/buyers',\n  name: 'buyerList',\n  component: BuyerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/change-password',\n  name: 'changePassword',\n  component: ChangePassword,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/orders',\n  name: 'customerOrders',\n  component: CustomerOrders,\n  meta: {\n    requiresAuth: true,\n    role: 'customer'\n  }\n}, {\n  path: '/seller/customers',\n  name: 'customerList',\n  component: CustomerList,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/categories',\n  name: 'sellerCategories',\n  component: SellerCategories,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/sub-categories',\n  name: 'sellerSubCategories',\n  component: SellerSubCategories,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}, {\n  path: '/seller/stock-logs',\n  name: 'stockLogs',\n  component: StockLogs,\n  meta: {\n    requiresAuth: true,\n    role: 'seller'\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 路由守卫，检查是否已登录\nrouter.beforeEach((to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  if (requiresAuth) {\n    const record = to.matched.find(r => r.meta.role);\n    // 检查是否需要卖家登录\n    if (record && record.meta.role === 'seller') {\n      if (!localStorage.getItem('sellerLoggedIn')) {\n        next({\n          name: 'sellerLogin'\n        });\n      } else {\n        next();\n      }\n    } else {\n      // 其他需要登录的页面（客户）\n      if (!localStorage.getItem('customerLoggedIn')) {\n        next({\n          name: 'customerLogin'\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","HomeView","SellerLogin","CustomerLogin","CustomerRegister","SellerDashboard","ProductForm","ProductHistory","BuyerList","ChangePassword","CustomerList","CustomerOrders","ProductBatchForm","SellerCategories","SellerSubCategories","StockLogs","routes","path","name","component","meta","requiresAuth","role","router","history","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","find","r","localStorage","getItem"],"sources":["D:/github/最后一舞/simple-shop-frontend/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport HomeView from '../views/HomeView.vue'\r\nimport SellerLogin from '../views/SellerLogin.vue'\r\nimport CustomerLogin from '../views/CustomerLogin.vue'\r\nimport CustomerRegister from '../views/CustomerRegister.vue'\r\nimport SellerDashboard from '../views/SellerDashboard.vue'\r\nimport ProductForm from '../views/ProductForm.vue'\r\nimport ProductHistory from '../views/ProductHistory.vue'\r\nimport BuyerList from '../views/BuyerList.vue'\r\nimport ChangePassword from '../views/ChangePassword.vue'\r\nimport CustomerList from '../views/CustomerList.vue'\r\nimport CustomerOrders from '../views/CustomerOrders.vue'\r\nimport ProductBatchForm from '../views/ProductBatchForm.vue'\r\nimport SellerCategories from '../views/SellerCategories.vue'\r\nimport SellerSubCategories from '../views/SellerSubCategories.vue'\r\nimport StockLogs from '../views/StockLogs.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'home',\r\n    component: HomeView\r\n  },\r\n  {\r\n    path: '/product/:id',\r\n    name: 'productDetail',\r\n    component: () => import('../views/ProductDetail.vue')\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'customerLogin',\r\n    component: CustomerLogin\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'customerRegister',\r\n    component: CustomerRegister\r\n  },\r\n  {\r\n    path: '/seller/login',\r\n    name: 'sellerLogin',\r\n    component: SellerLogin\r\n  },\r\n  {\r\n    path: '/seller/dashboard',\r\n    name: 'sellerDashboard',\r\n    component: SellerDashboard,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {    path: '/seller/product/new',\r\n    name: 'newProduct',\r\n    component: ProductForm,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {    path: '/seller/product/batch',\r\n    name: 'batchProductForm',\r\n    component: ProductBatchForm,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/products',\r\n    name: 'productHistory',\r\n    component: ProductHistory,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/buyers',\r\n    name: 'buyerList',\r\n    component: BuyerList,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/change-password',\r\n    name: 'changePassword',\r\n    component: ChangePassword,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/orders',\r\n    name: 'customerOrders',\r\n    component: CustomerOrders,\r\n    meta: { requiresAuth: true, role: 'customer' }\r\n  },\r\n  {\r\n    path: '/seller/customers',\r\n    name: 'customerList',\r\n    component: CustomerList,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  {\r\n    path: '/seller/categories',\r\n    name: 'sellerCategories',\r\n    component: SellerCategories,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  { \r\n    path: '/seller/sub-categories',\r\n    name: 'sellerSubCategories',\r\n    component: SellerSubCategories,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  { \r\n    path: '/seller/stock-logs',\r\n    name: 'stockLogs',\r\n    component: StockLogs,\r\n    meta: { requiresAuth: true, role: 'seller' }\r\n  },\r\n  ]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// 路由守卫，检查是否已登录\r\nrouter.beforeEach((to, from, next) => {\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\r\n\r\n  if (requiresAuth) {\r\n    const record = to.matched.find(r => r.meta.role);\r\n    // 检查是否需要卖家登录\r\n    if (record && record.meta.role === 'seller') {\r\n      if (!localStorage.getItem('sellerLoggedIn')) {\r\n        next({ name: 'sellerLogin' })\r\n      } else {\r\n        next()\r\n      }\r\n    } else {\r\n      // 其他需要登录的页面（客户）\r\n      if (!localStorage.getItem('customerLoggedIn')) {\r\n        next({ name: 'customerLogin' })\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}